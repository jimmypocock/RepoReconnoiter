get:
  summary: List repositories with filtering and pagination
  description: |
    Returns a paginated list of repositories with optional filtering by search term, language, and minimum stars.

    **Authentication:** API key required (no user auth needed)

    **Use Case:** Browse repositories, search for specific repos by name/description, filter by language or popularity.

    **Query Parameters:**
    - **search** (optional): Search term for name/description (case-insensitive)
    - **language** (optional): Filter by programming language (e.g., "Ruby", "Python")
    - **min_stars** (optional): Minimum stargazers count
    - **sort** (optional): Sort order - "stars", "created", "updated" (default: updated)
    - **page** (optional): Page number (default: 1)
    - **per_page** (optional): Items per page (default: 20, max: 100)

    **Response includes:**
    - Paginated list of repositories with basic info
    - Categories and analyses (if loaded)
    - Pagination metadata (page, per_page, total_pages, total_count)
  operationId: getRepositories
  tags:
    - Repositories
  security:
    - BearerAuth: []
  parameters:
    - name: search
      in: query
      required: false
      schema:
        type: string
      description: Search term for repository name or description
      example: "sidekiq"
    - name: language
      in: query
      required: false
      schema:
        type: string
      description: Filter by programming language
      example: "Ruby"
    - name: min_stars
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
      description: Minimum stargazers count
      example: 1000
    - name: sort
      in: query
      required: false
      schema:
        type: string
        enum: [stars, created, updated]
        default: updated
      description: Sort order
      example: "stars"
    - name: page
      in: query
      required: false
      schema:
        type: integer
        minimum: 1
        default: 1
      description: Page number
      example: 1
    - name: per_page
      in: query
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
      description: Items per page (max 100)
      example: 20
  responses:
    '200':
      description: Repositories retrieved successfully
      content:
        application/json:
          schema:
            type: object
            required:
              - data
              - meta
            properties:
              data:
                type: array
                items:
                  $ref: '../schemas/Repository.yml'
              meta:
                $ref: '../schemas/PaginationMeta.yml'
          example:
            data:
              - id: 123
                full_name: "sidekiq/sidekiq"
                description: "Simple, efficient background processing for Ruby"
                stargazers_count: 13000
                language: "Ruby"
                html_url: "https://github.com/sidekiq/sidekiq"
                categories: []
                analyses: []
              - id: 124
                full_name: "resque/resque"
                description: "Background jobs for Ruby"
                stargazers_count: 9400
                language: "Ruby"
                html_url: "https://github.com/resque/resque"
                categories: []
                analyses: []
            meta:
              pagination:
                page: 1
                per_page: 20
                total_pages: 5
                total_count: 100
                next_page: 2
                prev_page: null
    '401':
      description: Unauthorized (missing or invalid API key)
      content:
        application/json:
          schema:
            $ref: '../schemas/Error.yml'
          example:
            error:
              message: "API key required"
              details: ["Authorization header is missing or invalid"]
